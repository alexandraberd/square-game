let score,startBtn=document.querySelector("#startBtn"),field=document.querySelector(".game__field"),timer=document.querySelector("#timeCounter"),timerInput=document.querySelector(".game__timer-input"),timeTitle=document.querySelector(".game__title-time"),scoreTitle=document.querySelector(".game__title-score"),isGameStarted=!1;function startGame(){setTime(),score=0,isGameStarted=!0,field.style.backgroundColor="transparent",addHidden(startBtn),timerInput.disabled=!0,removeHidden(timeTitle),addHidden(scoreTitle),startTimer(),renederBox()}function renederBox(){field.innerHTML="";let e=document.createElement("div");e.setAttribute("data-box","true"),e.style.position="absolute",e.style.cursor="pointer";let t=getRandomInt(30,100);e.style.width=e.style.height=t+"px",e.style.backgroundColor="rgb("+getRandomInt(0,255)+", "+getRandomInt(0,255)+", "+getRandomInt(0,255)+")";let n=field.getBoundingClientRect(),r=n.height-t,i=n.width-t;e.style.top=getRandomInt(0,r)+"px",e.style.left=getRandomInt(0,i)+"px",field.append(e)}function handleBoxClick(e){if(!isGameStarted)return;e.target.dataset.box&&(renederBox(),score++)}function getRandomInt(e,t){return Math.floor(Math.random()*(t-e))+e}function startTimer(){let e=setInterval((()=>{let t=timer.innerHTML;t<=0?(endGame(),clearInterval(e)):timer.innerHTML=(t-.1).toFixed(1)}),100)}function endGame(){isGameStarted=!1,field.style.backgroundColor="#b9cec7",timerInput.disabled=!1,removeHidden(startBtn),field.innerHTML="",scoreTitle.innerHTML=`Score: ${score}`,addHidden(timeTitle),removeHidden(scoreTitle)}function setTime(){timerInput.value<1&&(timerInput.value=1),timer.innerHTML=parseInt(timerInput.value).toFixed(1)}function addHidden(e){e.hidden=!0}function removeHidden(e){e.hidden=!1}startBtn.addEventListener("click",startGame),field.addEventListener("click",handleBoxClick),timerInput.addEventListener("change",(()=>{setTime()}));